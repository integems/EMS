<!-- Wappler include head-page="layouts/securityLayout" bootstrap5="local" id="login" fontawesome_6="local" components="{dmxValidator:{},dmxBootstrap5Alert:{},dmxBrowser:{},dmxBootstrap5Modal:{},dmxNotifications:{},dmxFormatter:{}}" is="dmx-app" appConnect="local" -->
<meta name="ac:route" content="/login">


<style>
    main {
        margin-left: 0 !important;
    }

    #toggle {
        cursor: pointer;
    }

    #loginForm {
        background: linear-gradient(to right, #C0D6E8, #EEF7FF);
        color: #365486;
    }

    #login_submit {
        background-color: #365486;
        border: none;
    }
</style>
<main class="p-4 style1" id="loginPage">
    <div class="container card card-body shadow" id="loginForm">
        <div class="row p-4 justify-content-center">
            <div class="col">
                <form id="scfLogin" method="post" is="dmx-serverconnect-form" action="/api/security/login" dmx-on:success="browser.goto('/noise')" dmx-on:unauthorized="alertmessage.setTextContent(lastError.response);alertmessage.show()">
                    <div class="row">
                        <div class="col">
                            <div class="row mb-4">
                                <div class="col text-center">
                                    <a href="/"><img class="img-fluid" width="70px" dmx-bind:src="sc_security_app_data.data.query.where(`field_name`, 'logo', '==')[0].field_value"></a>
                                </div>
                            </div>
                            <div class="row mt-2">
                                <div class="col text-center">
                                    <h2 dmx-text="sc_security_app_data.data.query.where('field_name', '==', 'organisation_name')[0].field_value"></h2>
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col text-center">
                                    <h3>Login</h3>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="alert" id="alertmessage" is="dmx-bs5-alert" role="alert" type="danger">
                                        <p>Alert message</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col ">
                                    <label for="inp_email" class="col-form-label col-form-label-md">Email</label>
                                    <input type="email" id="inp_email" name="email" class="form-control form-control-lg" placeholder="name@domain.com" required="" data-msg-required="email is required.">
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col">
                                    <label for="inp_password" class="col-form-label col-form-label-md">Password</label>
                                    <div class="input-group mb-3">

                                        <input type="password" id="inp_password" name="password" class="form-control form-control-lg" placeholder="*************" aria-describedby="basic-addon-password" aria-label="password" required="" data-msg-required="password is required.">
                                        <span class="input-group-text hide-show-password" id="basic-addon-password">
                                            <i class="fas fa-eye-slash"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <small class="text-muted"><a id="forgot_password" href="/forgot-password" internal="true" class="text-decoration-none">Forgot Password?</a></small>
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col">
                                    <button id="login_submit" class="btn btn-primary w-100 text-light btn-lg" type="submit">Login&nbsp;<span class="spinner-border spinner-border-sm" role="status" dmx-show="state.executing"></span></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
</main>

<!-- Footert -->
<footer class="mt-4">
    <p class="text-center text-muted mb-0">
        &copy; <span id="currentYear"></span> Environmental Monitoring System.
        Developed with care by
        <a href="https://www.integemsgroup.com" class="text-decoration-none">INTEGEMS</a>.
    </p>
</footer>

<script>
    // Update the footer year dynamically
        document.getElementById("currentYear").textContent = new Date().getFullYear();

        
    // const password = document.getElementById("inp_password");
    // let toggle = document.getElementById("toggle");
       
    // toggle.addEventListener("click", function(e) {
    //     let icon = $(this).is("i");
    //     icon ? toggle = $(this)[0] : toggle = $(this).find("i")[0]
    //     if (password.type === "password") {
    //     password.type = "text";
    //     toggle.classList.remove("fa-eye-slash");
    //     toggle.classList.add("fa-eye");
    //     } else {
    //     password.type = "password";
    //     toggle.classList.remove("fa-eye");
    //     toggle.classList.add("fa-eye-slash");
    //     }
    
    // });


    $(".hide-show-password").each(function(){

       $(this).on("click", function(e) {
            let password = $(this).parent().find("input");
            let icon = $(this).find("i");          
            if (password[0].type === "password") {
                password[0].type = "text";
                icon.removeClass("fa-eye-slash");
                icon.addClass("fa-eye");
            } else {
                password[0].type = "password";
                icon.removeClass("fa-eye");
                icon.addClass("fa-eye-slash");
            }        
        });
    
    })
      
   
</script>


<meta name="ac:route" content="/Login">