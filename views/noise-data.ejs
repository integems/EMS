<!-- Wappler include head-page="layouts/portal_layout" is="dmx-app" id="noisedata" appConnect="local" bootstrap5="local" fontawesome_6="local" bootstrap_icons="local" jquery_slim_35="cdn" components="{dmxBootstrap5Navigation:{},dmxBootstrap5TableGenerator:{},dmxFormatter:{}}" -->
<dmx-serverconnect id="sc_noise_data" url="/api/noise/query_noise_data" dmx-param:monitoring_location="select_monitoring_location.value" dmx-param:year="select_year.value"></dmx-serverconnect>
<dmx-serverconnect id="sc_monitoring_locations" url="/api/location/monitoring_location_id"></dmx-serverconnect>
<dmx-serverconnect id="sc_monitorin_location_type" url="/api/location/monitoring_location_type"></dmx-serverconnect>



<section class="mb-3">
    <div class="row text-end">
        <div class="col text-start">
            <h1 class="fw-normal fs-2">Noise Data</h1>
            <div class="breadcrumb">
                <a class="breadcrumb-item breadcrumb-link fs-5 fw-light" href="/dashboard">Dashboard</a>
                <a class="breadcrumb-item breadcrumb-link fs-5 fw-light" href="/noise">Noise</a>
                <a class="breadcrumb-item breadcrumb-link fs-5 fw-bold" href="/noise-data">Data</a>
            </div>
        </div>
    </div>
</section>

<section class="mb-3">
    <div class="row">
        <div class="col">
            <select id="select_year" class="form-select">
                <option value="">All Years</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getYear()">{{var_datetime.datetime.getYear()}}</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getYear(var_datetime.datetime)-1">{{var_datetime.datetime.getYear(var_datetime.datetime)-1}}</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getYear(var_datetime.datetime)-2">{{var_datetime.datetime.getYear(var_datetime.datetime)-2}}</option>
            </select>
        </div>
        <div class="col">
            <select id="select_monthly" class="form-select">
                <option value="">All Months</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getMonth()">{{var_datetime.datetime.getMonth()}}</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getMonth(var_datetime.datetime)-1">{{var_datetime.datetime.getMonth(var_datetime.datetime)-1}}</option>
                <option value="" dmx-bind:value="var_datetime.datetime.getMonth(var_datetime.datetime)-2">{{var_datetime.datetime.getMonth(var_datetime.datetime)-2}}</option>
            </select>
        </div>
        <div class="col">
            <select id="select_monitoring_location" class="form-select" name="location_id" dmx-bind:options="sc_monitoring_locations.data.monitoring_location_id" optiontext="org_specific_monitoring_id" optionvalue="location_id">
                <option value="">All Monitoring Locations</option>
            </select>
        </div>
    </div>
</section>
<section class="mb-3">
    <div class="row">
        <div class="col mb-3">
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th>Location</th>
                                    <th>Type</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>LA<sub>eq</sub></th>
                                    <th>LA<sub>90</sub></th>
                                    <th>LA<sub>10</sub></th>
                                    <th>LAF<sub>Max</sub></th>
                                    <th>LAF<sub>Min</sub></th>
                                </tr>
                            </thead>
                            <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="sc_noise_data.data.query_noise.data" id="tableRepeat2">
                                <tr>
                                    <td dmx-text="org_specific_monitoring_id"></td>
                                    <td dmx-text="location_type"></td>
                                    <td dmx-text="start_date_time.formatDate('dd-MM-yyyy HH:mm')"></td>
                                    <td dmx-text="end_date_time.formatDate('dd-MM-yyyy HH:mm')"></td>
                                    <td dmx-text="LAeq"></td>
                                    <td dmx-text="LA90"></td>
                                    <td dmx-text="LA10"></td>
                                    <td dmx-text="LAFMax"></td>
                                    <td dmx-text="LAFMin"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <ul class="pagination" dmx-populate="sc_noise_data.data.query_noise" dmx-state="query_noise" dmx-offset="Offset" dmx-generator="bs5paging">
                <li class="page-item" dmx-class:disabled="sc_noise_data.data.query_noise.page.current == 1" aria-label="First">
                    <a href="javascript:void(0)" class="page-link" dmx-on:click="query_noise.set('Offset',sc_noise_data.data.query_noise.page.offset.first)"><span aria-hidden="true">&lsaquo;&lsaquo;</span></a>
                </li>
                <li class="page-item" dmx-class:disabled="sc_noise_data.data.query_noise.page.current == 1" aria-label="Previous">
                    <a href="javascript:void(0)" class="page-link" dmx-on:click="query_noise.set('Offset',sc_noise_data.data.query_noise.page.offset.prev)"><span aria-hidden="true">&lsaquo;</span></a>
                </li>
                <li class="page-item" dmx-class:active="title == sc_noise_data.data.query_noise.page.current" dmx-class:disabled="!active" dmx-repeat="sc_noise_data.data.query_noise.getServerConnectPagination(2,1,'...')">
                    <a href="javascript:void(0)" class="page-link" dmx-on:click="query_noise.set('Offset',(page-1)*sc_noise_data.data.query_noise.limit)">{{title}}</a>
                </li>
                <li class="page-item" dmx-class:disabled="sc_noise_data.data.query_noise.page.current ==  sc_noise_data.data.query_noise.page.total" aria-label="Next">
                    <a href="javascript:void(0)" class="page-link" dmx-on:click="query_noise.set('Offset',sc_noise_data.data.query_noise.page.offset.next)"><span aria-hidden="true">&rsaquo;</span></a>
                </li>
                <li class="page-item" dmx-class:disabled="sc_noise_data.data.query_noise.page.current ==  sc_noise_data.data.query_noise.page.total" aria-label="Last">
                    <a href="javascript:void(0)" class="page-link" dmx-on:click="query_noise.set('Offset',sc_noise_data.data.query_noise.page.offset.last)"><span aria-hidden="true">&rsaquo;&rsaquo;</span></a>
                </li>
            </ul>

        </div>
    </div>
</section>
<meta name="ac:route" content="/noise-data">